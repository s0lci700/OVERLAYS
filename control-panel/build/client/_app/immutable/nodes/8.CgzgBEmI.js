import"../chunks/DsnmJJEf.js";import"../chunks/BjI-d_yl.js";import{p as yl,M as d,U as N,t as m,i as a,a as xl,s as n,c as t,L as o,N as Sl,r,f as S}from"../chunks/ab1WaRnl.js";import{a as c,f as u,c as A}from"../chunks/C0gwv_6f.js";import{e as Ol,s as f}from"../chunks/Cxuf-16e.js";import{i as x}from"../chunks/D5oBZPha.js";import{e as h,s as w,r as z,i as k}from"../chunks/hbQhw9FI.js";import{b as C}from"../chunks/CV7Gzqws.js";import{b as y}from"../chunks/bxKVI7mh.js";import{P as El,c as Ml}from"../chunks/CWKQFtD-.js";import{S as Ea}from"../chunks/DKBTBH1p.js";var Pl=u("<option> </option>"),Nl=u("<option>Sin opciones</option>"),Al=u("<option> </option>"),wl=u("<option>Sin definir</option> <!>",1),zl=u("<option> </option>"),Cl=u("<option>Sin opciones</option>"),Ll=u("<option> </option>"),Rl=u("<option>Sin definir</option> <!>",1),Vl=u("<option> </option>"),jl=u("<option> </option>"),Tl=u("<option> </option>"),Ul=u("<option>Sin opciones</option>"),Il=u("<option> </option>"),ql=u("<option>Sin opciones</option>"),Fl=u("<option> </option>"),Jl=u("<option>Sin opciones</option>"),Bl=u("<option> </option>"),Dl=u("<option>Sin opciones</option>"),Hl=u("<option> </option>"),Wl=u("<option>Sin opciones</option>"),Xl=u("<option> </option>"),Gl=u("<option>Sin opciones</option>"),Kl=u("<option> </option>"),Ql=u("<option>Sin opciones</option>"),Yl=u("<option> </option>"),Zl=u("<option>Sin opciones</option>"),$l=u("<option> </option>"),et=u("<option>Sin definir</option> <!>",1),at=u('<p class="create-feedback error"> </p>'),lt=u('<p class="create-feedback success"> </p>'),tt=u('<section class="character-create card-base" aria-labelledby="create-character-title"><div class="create-header"><h2 id="create-character-title" class="create-title">NUEVO PERSONAJE</h2> <p class="create-subtitle">Scaffold base para alta r치pida en sesi칩n</p></div> <form class="create-form"><div class="create-layout"><div class="create-fields"><label class="create-field"><span class="label-caps">Nombre</span> <input type="text" placeholder="Ej. Valeria" maxlength="40" required=""/></label> <label class="create-field"><span class="label-caps">Jugador</span> <input type="text" placeholder="Ej. Sol" maxlength="40" required=""/></label> <div class="create-grid"><label class="create-field"><span class="label-caps">HP MAX</span> <input type="number" min="1" max="999" required=""/></label> <label class="create-field"><span class="label-caps">AC</span> <input type="number" min="0" max="99"/></label> <label class="create-field"><span class="label-caps">VEL</span> <input type="number" min="0" max="200"/></label></div> <div class="create-section"><h3 class="section-title">Opciones de personaje</h3> <div class="create-grid create-grid--two"><label class="create-field"><span class="label-caps">Clase</span> <select><option>Sin definir</option><!></select></label> <label class="create-field"><span class="label-caps">Subclase</span> <select><!></select></label> <label class="create-field"><span class="label-caps">Nivel</span> <input type="number" min="1" max="20"/></label> <label class="create-field"><span class="label-caps">Background</span> <select><option>Sin definir</option><!></select></label> <label class="create-field"><span class="label-caps">Feat</span> <select><!></select></label> <label class="create-field"><span class="label-caps">Especie</span> <select><option>Sin definir</option><!></select></label> <label class="create-field"><span class="label-caps">Tama침o</span> <select><option>Sin definir</option><!></select></label> <label class="create-field"><span class="label-caps">Alineamiento</span> <select><option>Sin definir</option><!></select></label></div> <div class="create-grid create-grid--two"><label class="create-field"><span class="label-caps">Idiomas</span> <select multiple=""><!></select></label> <label class="create-field"><span class="label-caps">Idiomas raros</span> <select multiple=""><!></select></label></div> <div class="create-grid create-grid--two"><label class="create-field"><span class="label-caps">Skills</span> <select multiple=""><!></select></label> <label class="create-field"><span class="label-caps">Herramientas</span> <select multiple=""><!></select></label></div> <div class="create-grid create-grid--two"><label class="create-field"><span class="label-caps">Armadura</span> <select multiple=""><!></select></label> <label class="create-field"><span class="label-caps">Armas</span> <select multiple=""><!></select></label></div> <div class="create-grid create-grid--two"><label class="create-field"><span class="label-caps">Items</span> <select multiple=""><!></select></label> <label class="create-field"><span class="label-caps">Trinket</span> <select><!></select></label></div></div></div> <aside class="create-photo"><!></aside></div> <button class="create-submit btn-base" type="submit"> </button> <!> <!></form></section>');function rt(ge,L){yl(L,!0);let P=d(""),R=d(""),V=d(30),J=d(10),j=d(30),B=d(""),D=d(""),H=d(1),W=d(""),X=d(""),G=d(""),K=d(""),Q=d(""),Y=d(N([])),Z=d(N([])),T=d(N([])),U=d(N([])),$=d(N([])),ee=d(N([])),ae=d(N([])),le=d(""),I=d("preset"),te=d(""),re=d(""),se=d(""),q=d(!1),O=d(""),oe=d("");const Ma=[{label:"Aleatorio",value:""},{label:"Barbarian",value:"/assets/img/barbarian.png"},{label:"Elf",value:"/assets/img/elf.png"},{label:"Wizard",value:"/assets/img/wizard.png"}],g=Ml||{},Pa=g.classes||[],he=g.subclasses||[],Na=g.backgrounds||[],ke=g.feats||[],Aa=g.species||[],wa=g.sizes||[],ye=g.languages||[],xe=g.rare_languages||[],za=g.alignments||[],Se=g.skills||[],Oe=g.tools||[],Ee=g.armor_proficiencies||[],Me=g.weapon_proficiencies||[],ie=g.items||[],Pe=g.trinkets||[],na=Sl(()=>a(P).trim().length>0&&a(R).trim().length>0&&a(V)>0);function E(e){return Array.isArray(e)?e.map(l=>String(l).trim()).filter(l=>l.length>0):[]}function Ca(){return a(I)==="local"?a(se):a(I)==="url"?a(re).trim():a(te)}function La(e){if(e){o(O,e,!0);return}(a(O)==="El archivo debe ser una imagen."||a(O)==="No se pudo procesar la imagen local.")&&o(O,"")}async function Ra(e){if(e.preventDefault(),!(!a(na)||a(q))){o(q,!0),o(O,""),o(oe,"");try{const l={name:a(P).trim(),player:a(R).trim(),hp_max:Number(a(V)),armor_class:Number(a(J)),speed_walk:Number(a(j)),class_primary:{name:a(B),level:Number(a(H))||1,subclass:a(D)},background:{name:a(W),feat:a(X),skill_proficiencies:E(a(T)),tool_proficiency:E(a(U))[0]||""},species:{name:a(G),size:a(K),speed_walk:Number(a(j)),traits:[]},languages:[...E(a(Y)),...E(a(Z))],alignment:a(Q),proficiencies:{skills:E(a(T)),saving_throws:[],armor:E(a($)),weapons:E(a(ee)),tools:E(a(U))},equipment:{items:E(a(ae)),coins:{gp:0,sp:0,cp:0},trinket:a(le)}},s=Ca();s&&(l.photo=s);const p=await fetch(`${Ea}/api/characters`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!p.ok){const v=await p.json().catch(()=>null);o(O,v?.error||"No se pudo crear el personaje.",!0);return}o(P,""),o(R,""),o(V,30),o(J,10),o(j,30),o(B,""),o(D,""),o(H,1),o(W,""),o(X,""),o(G,""),o(K,""),o(Q,""),o(Y,[],!0),o(Z,[],!0),o(T,[],!0),o(U,[],!0),o($,[],!0),o(ee,[],!0),o(ae,[],!0),o(le,""),o(I,"preset"),o(te,""),o(re,""),o(se,""),o(oe,"Personaje creado.")}catch(l){console.error("Error creating character",l),o(O,"Error de conexi칩n al crear personaje.")}finally{o(q,!1)}}}var Ne=tt(),Ae=n(t(Ne),2),we=t(Ae),ze=t(we),Ce=t(ze),va=n(t(Ce),2);z(va),r(Ce);var Le=n(Ce,2),ca=n(t(Le),2);z(ca),r(Le);var Re=n(Le,2),Ve=t(Re),pa=n(t(Ve),2);z(pa),r(Ve);var je=n(Ve,2),_a=n(t(je),2);z(_a),r(je);var ua=n(je,2),da=n(t(ua),2);z(da),r(ua),r(Re);var ba=n(Re,2),Te=n(t(ba),2),Ue=t(Te),Ie=n(t(Ue),2),qe=t(Ie);qe.value=qe.__value="";var Va=n(qe);h(Va,17,()=>Pa,k,(e,l)=>{var s=Pl(),p=t(s,!0);r(s);var v={};m(()=>{f(p,a(l).label),v!==(v=a(l).key)&&(s.value=(s.__value=a(l).key)??"")}),c(e,s)}),r(Ie),r(Ue);var Fe=n(Ue,2),ne=n(t(Fe),2),ja=t(ne);{var Ta=e=>{var l=Nl();l.value=l.__value="",c(e,l)},Ua=e=>{var l=wl(),s=S(l);s.value=s.__value="";var p=n(s,2);h(p,17,()=>he,k,(v,i)=>{var _=Al(),b=t(_,!0);r(_);var M={};m(()=>{f(b,a(i).label),M!==(M=a(i).key)&&(_.value=(_.__value=a(i).key)??"")}),c(v,_)}),c(e,l)};x(ja,e=>{he.length===0?e(Ta):e(Ua,!1)})}r(ne),r(Fe);var Je=n(Fe,2),ma=n(t(Je),2);z(ma),r(Je);var Be=n(Je,2),De=n(t(Be),2),He=t(De);He.value=He.__value="";var Ia=n(He);h(Ia,17,()=>Na,k,(e,l)=>{var s=zl(),p=t(s,!0);r(s);var v={};m(()=>{f(p,a(l).label),v!==(v=a(l).key)&&(s.value=(s.__value=a(l).key)??"")}),c(e,s)}),r(De),r(Be);var We=n(Be,2),ve=n(t(We),2),qa=t(ve);{var Fa=e=>{var l=Cl();l.value=l.__value="",c(e,l)},Ja=e=>{var l=Rl(),s=S(l);s.value=s.__value="";var p=n(s,2);h(p,17,()=>ke,k,(v,i)=>{var _=Ll(),b=t(_,!0);r(_);var M={};m(()=>{f(b,a(i).label),M!==(M=a(i).key)&&(_.value=(_.__value=a(i).key)??"")}),c(v,_)}),c(e,l)};x(qa,e=>{ke.length===0?e(Fa):e(Ja,!1)})}r(ve),r(We);var Xe=n(We,2),Ge=n(t(Xe),2),Ke=t(Ge);Ke.value=Ke.__value="";var Ba=n(Ke);h(Ba,17,()=>Aa,k,(e,l)=>{var s=Vl(),p=t(s,!0);r(s);var v={};m(()=>{f(p,a(l).label),v!==(v=a(l).key)&&(s.value=(s.__value=a(l).key)??"")}),c(e,s)}),r(Ge),r(Xe);var Qe=n(Xe,2),Ye=n(t(Qe),2),Ze=t(Ye);Ze.value=Ze.__value="";var Da=n(Ze);h(Da,17,()=>wa,k,(e,l)=>{var s=jl(),p=t(s,!0);r(s);var v={};m(()=>{f(p,a(l).label),v!==(v=a(l).key)&&(s.value=(s.__value=a(l).key)??"")}),c(e,s)}),r(Ye),r(Qe);var fa=n(Qe,2),$e=n(t(fa),2),ea=t($e);ea.value=ea.__value="";var Ha=n(ea);h(Ha,17,()=>za,k,(e,l)=>{var s=Tl(),p=t(s,!0);r(s);var v={};m(()=>{f(p,a(l).label),v!==(v=a(l).key)&&(s.value=(s.__value=a(l).key)??"")}),c(e,s)}),r($e),r(fa),r(Te);var aa=n(Te,2),la=t(aa),ce=n(t(la),2),Wa=t(ce);{var Xa=e=>{var l=Ul();l.value=l.__value="",c(e,l)},Ga=e=>{var l=A(),s=S(l);h(s,17,()=>ye,k,(p,v)=>{var i=Il(),_=t(i,!0);r(i);var b={};m(()=>{f(_,a(v).label),b!==(b=a(v).key)&&(i.value=(i.__value=a(v).key)??"")}),c(p,i)}),c(e,l)};x(Wa,e=>{ye.length===0?e(Xa):e(Ga,!1)})}r(ce),r(la);var ga=n(la,2),pe=n(t(ga),2),Ka=t(pe);{var Qa=e=>{var l=ql();l.value=l.__value="",c(e,l)},Ya=e=>{var l=A(),s=S(l);h(s,17,()=>xe,k,(p,v)=>{var i=Fl(),_=t(i,!0);r(i);var b={};m(()=>{f(_,a(v).label),b!==(b=a(v).key)&&(i.value=(i.__value=a(v).key)??"")}),c(p,i)}),c(e,l)};x(Ka,e=>{xe.length===0?e(Qa):e(Ya,!1)})}r(pe),r(ga),r(aa);var ta=n(aa,2),ra=t(ta),_e=n(t(ra),2),Za=t(_e);{var $a=e=>{var l=Jl();l.value=l.__value="",c(e,l)},el=e=>{var l=A(),s=S(l);h(s,17,()=>Se,k,(p,v)=>{var i=Bl(),_=t(i,!0);r(i);var b={};m(()=>{f(_,a(v).label),b!==(b=a(v).key)&&(i.value=(i.__value=a(v).key)??"")}),c(p,i)}),c(e,l)};x(Za,e=>{Se.length===0?e($a):e(el,!1)})}r(_e),r(ra);var ha=n(ra,2),ue=n(t(ha),2),al=t(ue);{var ll=e=>{var l=Dl();l.value=l.__value="",c(e,l)},tl=e=>{var l=A(),s=S(l);h(s,17,()=>Oe,k,(p,v)=>{var i=Hl(),_=t(i,!0);r(i);var b={};m(()=>{f(_,a(v).label),b!==(b=a(v).key)&&(i.value=(i.__value=a(v).key)??"")}),c(p,i)}),c(e,l)};x(al,e=>{Oe.length===0?e(ll):e(tl,!1)})}r(ue),r(ha),r(ta);var sa=n(ta,2),oa=t(sa),de=n(t(oa),2),rl=t(de);{var sl=e=>{var l=Wl();l.value=l.__value="",c(e,l)},ol=e=>{var l=A(),s=S(l);h(s,17,()=>Ee,k,(p,v)=>{var i=Xl(),_=t(i,!0);r(i);var b={};m(()=>{f(_,a(v).label),b!==(b=a(v).key)&&(i.value=(i.__value=a(v).key)??"")}),c(p,i)}),c(e,l)};x(rl,e=>{Ee.length===0?e(sl):e(ol,!1)})}r(de),r(oa);var ka=n(oa,2),be=n(t(ka),2),il=t(be);{var nl=e=>{var l=Gl();l.value=l.__value="",c(e,l)},vl=e=>{var l=A(),s=S(l);h(s,17,()=>Me,k,(p,v)=>{var i=Kl(),_=t(i,!0);r(i);var b={};m(()=>{f(_,a(v).label),b!==(b=a(v).key)&&(i.value=(i.__value=a(v).key)??"")}),c(p,i)}),c(e,l)};x(il,e=>{Me.length===0?e(nl):e(vl,!1)})}r(be),r(ka),r(sa);var ya=n(sa,2),ia=t(ya),F=n(t(ia),2),cl=t(F);{var pl=e=>{var l=Ql();l.value=l.__value="",c(e,l)},_l=e=>{var l=A(),s=S(l);h(s,17,()=>ie,k,(p,v)=>{var i=Yl(),_=t(i,!0);r(i);var b={};m(()=>{f(_,a(v).label),b!==(b=a(v).key)&&(i.value=(i.__value=a(v).key)??"")}),c(p,i)}),c(e,l)};x(cl,e=>{ie.length===0?e(pl):e(_l,!1)})}r(F),r(ia);var xa=n(ia,2),me=n(t(xa),2),ul=t(me);{var dl=e=>{var l=Zl();l.value=l.__value="",c(e,l)},bl=e=>{var l=et(),s=S(l);s.value=s.__value="";var p=n(s,2);h(p,17,()=>Pe,k,(v,i)=>{var _=$l(),b=t(_,!0);r(_);var M={};m(()=>{f(b,a(i).label),M!==(M=a(i).key)&&(_.value=(_.__value=a(i).key)??"")}),c(v,_)}),c(e,l)};x(ul,e=>{Pe.length===0?e(dl):e(bl,!1)})}r(me),r(xa),r(ya),r(ba),r(ze);var Sa=n(ze,2),ml=t(Sa);El(ml,{get options(){return Ma},get source(){return a(I)},get presetValue(){return a(te)},get urlValue(){return a(re)},get localValue(){return a(se)},get serverUrl(){return Ea},dense:!0,onSourceChange:e=>o(I,e,!0),onPresetChange:e=>o(te,e,!0),onUrlChange:e=>o(re,e,!0),onLocalChange:e=>o(se,e,!0),onError:La}),r(Sa),r(we);var fe=n(we,2),fl=t(fe,!0);r(fe);var Oa=n(fe,2);{var gl=e=>{var l=at(),s=t(l,!0);r(l),m(()=>f(s,a(O))),c(e,l)};x(Oa,e=>{a(O)&&e(gl)})}var hl=n(Oa,2);{var kl=e=>{var l=lt(),s=t(l,!0);r(l),m(()=>f(s,a(oe))),c(e,l)};x(hl,e=>{a(oe)&&e(kl)})}r(Ae),r(Ne),m((e,l,s,p,v,i,_)=>{ne.disabled=he.length===0,ve.disabled=ke.length===0,w(ce,"size",e),w(pe,"size",l),w(_e,"size",s),w(ue,"size",p),w(de,"size",v),w(be,"size",i),w(F,"size",_),F.disabled=ie.length===0,me.disabled=Pe.length===0,fe.disabled=!a(na)||a(q),f(fl,a(q)?"CREANDO...":"CREAR PERSONAJE")},[()=>Math.max(3,Math.min(6,ye.length||3)),()=>Math.max(3,Math.min(6,xe.length||3)),()=>Math.max(4,Math.min(8,Se.length||4)),()=>Math.max(4,Math.min(8,Oe.length||4)),()=>Math.max(3,Math.min(6,Ee.length||3)),()=>Math.max(3,Math.min(6,Me.length||3)),()=>Math.max(3,Math.min(6,ie.length||3))]),Ol("submit",Ae,Ra),C(va,()=>a(P),e=>o(P,e)),C(ca,()=>a(R),e=>o(R,e)),C(pa,()=>a(V),e=>o(V,e)),C(_a,()=>a(J),e=>o(J,e)),C(da,()=>a(j),e=>o(j,e)),y(Ie,()=>a(B),e=>o(B,e)),y(ne,()=>a(D),e=>o(D,e)),C(ma,()=>a(H),e=>o(H,e)),y(De,()=>a(W),e=>o(W,e)),y(ve,()=>a(X),e=>o(X,e)),y(Ge,()=>a(G),e=>o(G,e)),y(Ye,()=>a(K),e=>o(K,e)),y($e,()=>a(Q),e=>o(Q,e)),y(ce,()=>a(Y),e=>o(Y,e)),y(pe,()=>a(Z),e=>o(Z,e)),y(_e,()=>a(T),e=>o(T,e)),y(ue,()=>a(U),e=>o(U,e)),y(de,()=>a($),e=>o($,e)),y(be,()=>a(ee),e=>o(ee,e)),y(F,()=>a(ae),e=>o(ae,e)),y(me,()=>a(le),e=>o(le,e)),c(ge,Ne),xl()}var st=u('<section class="tab-panel"><!></section>');function ft(ge){var L=st(),P=t(L);rt(P,{}),r(L),c(ge,L)}export{ft as component};
