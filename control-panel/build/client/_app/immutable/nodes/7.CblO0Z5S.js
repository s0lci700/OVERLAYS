import"../chunks/DsnmJJEf.js";import"../chunks/BcPgcvTn.js";import{p as ie,t as J,i as e,a as ne,s as l,z as r,c as t,a0 as i,r as s,a1 as ce}from"../chunks/BpRt2mh-.js";import{a as C,f as N}from"../chunks/CXy7eh0M.js";import{e as pe,s as M}from"../chunks/CSeQF5Ga.js";import{i as G}from"../chunks/D5Mqzety.js";import{r as f}from"../chunks/6gtY402H.js";import{b as h}from"../chunks/D3iX995e.js";import{P as ue}from"../chunks/Dwc37TK4.js";import{S as K}from"../chunks/Nz_3zEkQ.js";var de=N('<p class="create-feedback error"> </p>'),me=N('<p class="create-feedback success"> </p>'),be=N('<section class="character-create card-base" aria-labelledby="create-character-title"><div class="create-header"><h2 id="create-character-title" class="create-title">NUEVO PERSONAJE</h2> <p class="create-subtitle">Scaffold base para alta rápida en sesión</p></div> <form class="create-form"><div class="create-layout"><div class="create-fields"><label class="create-field"><span class="label-caps">Nombre</span> <input type="text" placeholder="Ej. Valeria" maxlength="40" required=""/></label> <label class="create-field"><span class="label-caps">Jugador</span> <input type="text" placeholder="Ej. Sol" maxlength="40" required=""/></label> <div class="create-grid"><label class="create-field"><span class="label-caps">HP MAX</span> <input type="number" min="1" max="999" required=""/></label> <label class="create-field"><span class="label-caps">AC</span> <input type="number" min="0" max="99"/></label> <label class="create-field"><span class="label-caps">VEL</span> <input type="number" min="0" max="200"/></label></div></div> <aside class="create-photo"><!></aside></div> <button class="create-submit btn-base" type="submit"> </button> <!> <!></form></section>');function ve(A,u){ie(u,!0);let c=i(""),d=i(""),m=i(30),g=i(10),_=i(30),b=i("preset"),E=i(""),y=i(""),P=i(""),v=i(!1),n=i(""),x=i("");const Q=[{label:"Aleatorio",value:""},{label:"Barbarian",value:"/assets/img/barbarian.png"},{label:"Elf",value:"/assets/img/elf.png"},{label:"Wizard",value:"/assets/img/wizard.png"}],q=ce(()=>e(c).trim().length>0&&e(d).trim().length>0&&e(m)>0);function Y(){return e(b)==="local"?e(P):e(b)==="url"?e(y).trim():e(E)}function Z(a){if(a){r(n,a,!0);return}(e(n)==="El archivo debe ser una imagen."||e(n)==="No se pudo procesar la imagen local.")&&r(n,"")}async function ee(a){if(a.preventDefault(),!(!e(q)||e(v))){r(v,!0),r(n,""),r(x,"");try{const o={name:e(c).trim(),player:e(d).trim(),hp_max:Number(e(m)),armor_class:Number(e(g)),speed_walk:Number(e(_))},p=Y();p&&(o.photo=p);const X=await fetch(`${K}/api/characters`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!X.ok){const oe=await X.json().catch(()=>null);r(n,oe?.error||"No se pudo crear el personaje.",!0);return}r(c,""),r(d,""),r(m,30),r(g,10),r(_,30),r(b,"preset"),r(E,""),r(y,""),r(P,""),r(x,"Personaje creado.")}catch(o){console.error("Error creating character",o),r(n,"Error de conexión al crear personaje.")}finally{r(v,!1)}}}var V=be(),R=l(t(V),2),k=t(R),O=t(k),j=t(O),z=l(t(j),2);f(z),s(j);var U=l(j,2),D=l(t(U),2);f(D),s(U);var T=l(U,2),L=t(T),B=l(t(L),2);f(B),s(L);var w=l(L,2),F=l(t(w),2);f(F),s(w);var H=l(w,2),W=l(t(H),2);f(W),s(H),s(T),s(O);var $=l(O,2),ae=t($);ue(ae,{get options(){return Q},get source(){return e(b)},get presetValue(){return e(E)},get urlValue(){return e(y)},get localValue(){return e(P)},get serverUrl(){return K},dense:!0,onSourceChange:a=>r(b,a,!0),onPresetChange:a=>r(E,a,!0),onUrlChange:a=>r(y,a,!0),onLocalChange:a=>r(P,a,!0),onError:Z}),s($),s(k);var S=l(k,2),re=t(S,!0);s(S);var I=l(S,2);{var te=a=>{var o=de(),p=t(o,!0);s(o),J(()=>M(p,e(n))),C(a,o)};G(I,a=>{e(n)&&a(te)})}var se=l(I,2);{var le=a=>{var o=me(),p=t(o,!0);s(o),J(()=>M(p,e(x))),C(a,o)};G(se,a=>{e(x)&&a(le)})}s(R),s(V),J(()=>{S.disabled=!e(q)||e(v),M(re,e(v)?"CREANDO...":"CREAR PERSONAJE")}),pe("submit",R,ee),h(z,()=>e(c),a=>r(c,a)),h(D,()=>e(d),a=>r(d,a)),h(B,()=>e(m),a=>r(m,a)),h(F,()=>e(g),a=>r(g,a)),h(W,()=>e(_),a=>r(_,a)),C(A,V),ne()}var fe=N('<section class="tab-panel"><!></section>');function Ae(A){var u=fe(),c=t(u);ve(c,{}),s(u),C(A,u)}export{Ae as component};
