import"../chunks/DsnmJJEf.js";import"../chunks/BjI-d_yl.js";import{p as Rl,M as b,U as c,d as Fl,f as V,t as O,a as Ul,i as e,L as o,s as r,c as i,r as n,aJ as Mt,N as va}from"../chunks/ab1WaRnl.js";import{a as _,f as d,c as We}from"../chunks/C0gwv_6f.js";import{d as Dl,s as x,a as f}from"../chunks/Cxuf-16e.js";import{i as C}from"../chunks/D5oBZPha.js";import{e as A,s as $,r as Ye,i as L,a as Ie,b as Je}from"../chunks/hbQhw9FI.js";import{s as Xa}from"../chunks/CRAvAg1A.js";import{i as z,s as R}from"../chunks/bxKVI7mh.js";import{a as Wl,s as Jl}from"../chunks/BddI7m7i.js";import{c as Vl,P as $l}from"../chunks/CWKQFtD-.js";import{c as jl,S as he}from"../chunks/DKBTBH1p.js";var ql=d('<div class="manage-summary"><span> </span> <span class="manage-summary-sep">•</span> <span> </span> <span class="manage-summary-sep">•</span> <span> </span></div>'),Gl=d("<option> </option>"),Hl=d("<option>Sin opciones</option>"),Kl=d("<option> </option>"),Xl=d("<option>Sin definir</option> <!>",1),Zl=d("<option> </option>"),Ql=d("<option>Sin opciones</option>"),Yl=d("<option> </option>"),Il=d("<option>Sin definir</option> <!>",1),hl=d("<option> </option>"),es=d("<option> </option>"),as=d("<option> </option>"),ts=d("<option>Sin opciones</option>"),ls=d("<option> </option>"),ss=d("<option>Sin opciones</option>"),ns=d("<option> </option>"),is=d("<option>Sin opciones</option>"),os=d("<option> </option>"),rs=d("<option>Sin opciones</option>"),us=d("<option> </option>"),vs=d("<option>Sin opciones</option>"),ps=d("<option> </option>"),_s=d("<option>Sin opciones</option>"),ds=d("<option> </option>"),ms=d("<option>Sin opciones</option>"),gs=d("<option> </option>"),bs=d("<option>Sin opciones</option>"),cs=d("<option> </option>"),fs=d("<option>Sin definir</option> <!>",1),ys=d("<span> </span>"),ks=d('<div class="manage-form"><label class="manage-field"><span class="label-caps">Nombre</span> <input type="text" maxlength="40"/></label> <label class="manage-field"><span class="label-caps">Jugador</span> <input type="text" maxlength="40"/></label> <div class="manage-grid-fields"><label class="manage-field"><span class="label-caps">HP MAX</span> <input type="number" min="1" max="999"/></label> <label class="manage-field"><span class="label-caps">AC</span> <input type="number" min="0" max="99"/></label> <label class="manage-field"><span class="label-caps">VEL</span> <input type="number" min="0" max="200"/></label></div> <div class="manage-section"><h4 class="manage-section-title">Opciones de personaje</h4> <div class="manage-grid-two"><label class="manage-field"><span class="label-caps">Clase</span> <select><option>Sin definir</option><!></select></label> <label class="manage-field"><span class="label-caps">Subclase</span> <select><!></select></label> <label class="manage-field"><span class="label-caps">Nivel</span> <input type="number" min="1" max="20"/></label> <label class="manage-field"><span class="label-caps">Background</span> <select><option>Sin definir</option><!></select></label> <label class="manage-field"><span class="label-caps">Feat</span> <select><!></select></label> <label class="manage-field"><span class="label-caps">Especie</span> <select><option>Sin definir</option><!></select></label> <label class="manage-field"><span class="label-caps">Tamaño</span> <select><option>Sin definir</option><!></select></label> <label class="manage-field"><span class="label-caps">Alineamiento</span> <select><option>Sin definir</option><!></select></label></div></div> <div class="manage-section"><h4 class="manage-section-title">Idiomas y proficiencias</h4> <div class="manage-grid-two"><label class="manage-field"><span class="label-caps">Idiomas</span> <select multiple=""><!></select></label> <label class="manage-field"><span class="label-caps">Idiomas raros</span> <select multiple=""><!></select></label></div> <div class="manage-grid-two"><label class="manage-field"><span class="label-caps">Skills</span> <select multiple=""><!></select></label> <label class="manage-field"><span class="label-caps">Herramientas</span> <select multiple=""><!></select></label></div> <div class="manage-grid-two"><label class="manage-field"><span class="label-caps">Armadura</span> <select multiple=""><!></select></label> <label class="manage-field"><span class="label-caps">Armas</span> <select multiple=""><!></select></label></div></div> <div class="manage-section"><h4 class="manage-section-title">Equipo</h4> <div class="manage-grid-two"><label class="manage-field"><span class="label-caps">Items</span> <select multiple=""><!></select></label> <label class="manage-field"><span class="label-caps">Trinket</span> <select><!></select></label></div></div> <div class="manage-actions"><button class="btn-base manage-save-btn manage-save-btn--outline" type="button">SUBIR NIVEL</button> <button class="btn-base manage-save-btn manage-save-btn--neutral" type="button"> </button> <!> <span class="manage-note">Subir nivel solo ajusta el nivel por ahora.</span></div></div>'),xs=d('<article class="manage-card card-base"><header class="manage-card-head"><div class="manage-identity"><button class="manage-photo-btn" type="button"><img class="manage-photo"/> <span class="manage-photo-hint">Editar foto</span></button> <div class="manage-names"><h3 class="manage-char-name"> </h3> <span class="manage-char-player"> </span></div></div> <button class="btn-base manage-edit-toggle" type="button"> </button></header> <!> <!></article>'),Ss=d("<span> </span>"),Os=d('<button class="photo-modal-backdrop" type="button" aria-label="Cerrar editor de foto"></button> <dialog class="photo-modal" open="" aria-labelledby="photo-modal-title"><div class="photo-modal-card card-base"><header class="photo-modal-head"><h3 id="photo-modal-title" class="photo-modal-title">Editar foto</h3> <button class="photo-modal-close" type="button" aria-label="Cerrar">✕</button></header> <!> <div class="photo-modal-actions"><button class="btn-base manage-save-btn" type="button"> </button> <!></div></div></dialog>',1),Bs=d('<section class="character-management" aria-labelledby="manage-character-title"><div class="manage-header"><h2 id="manage-character-title" class="manage-title">GESTION DE PERSONAJES</h2></div> <div></div></section> <!>',1);function Es(pa,ea){Rl(ea,!0);const aa=()=>Wl(jl,"$characters",Pt),[Pt,wt]=Jl(),Za=[{label:"Aleatorio",value:""},{label:"Barbarian",value:"/assets/img/barbarian.png"},{label:"Elf",value:"/assets/img/elf.png"},{label:"Wizard",value:"/assets/img/wizard.png"}];let Ae=b(c({})),Ve=b(c({})),$e=b(c({})),je=b(c({})),Q=b(c({})),B=b(c({})),H=b(c({})),M=b(c({})),qe=b(c({})),Ge=b(c({})),He=b(c({})),Ke=b(c({})),Xe=b(c({})),Y=b(c({})),de=b(c({})),K=b(c({})),me=b(c({})),ge=b(c({})),I=b(c({})),be=b(c({})),h=b(c({})),ee=b(c({})),ae=b(c({})),te=b(c({})),le=b(c({})),se=b(c({})),ne=b(c({})),ie=b(c({})),ce=b(c({})),oe=b(c({})),N=b(null);const P=Vl||{},Qa=P.classes||[],_a=P.subclasses||[],Ct=P.backgrounds||[],da=P.feats||[],Ya=P.species||[],Lt=P.sizes||[],ma=P.languages||[],ra=P.rare_languages||[],Ia=P.alignments||[],ga=P.skills||[],ba=P.tools||[],ca=P.armor_proficiencies||[],fa=P.weapon_proficiencies||[],ua=P.items||[],ya=P.trinkets||[],zt=new Set(ra.map(t=>t.key)),ka={class:new Map(Qa.map(t=>[t.key,t.label])),species:new Map(Ya.map(t=>[t.key,t.label])),alignment:new Map(Ia.map(t=>[t.key,t.label]))},ha=["/assets/img/barbarian.png","/assets/img/elf.png","/assets/img/wizard.png"];function Rt(t){if(!t){const a=ha[Math.floor(Math.random()*ha.length)];return`${he}${a}`}return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:")||t.startsWith("blob:")?t:t.startsWith("/")?`${he}${t}`:`${he}/${t.replace(/^\/+/,"")}`}function Ft(t){return!t||Za.some(a=>a.value===t)?"preset":t.startsWith("data:")?"local":"url"}function Ut(t){const a=t.id;if(e(Ae)[a]!==void 0)return;const y=t.photo||"",T=Ft(y);o(Ae,{...e(Ae),[a]:T},!0),o(Ve,{...e(Ve),[a]:T==="preset"?y:""},!0),o($e,{...e($e),[a]:T==="url"?y:""},!0),o(je,{...e(je),[a]:T==="local"?y:""},!0),o(Q,{...e(Q),[a]:!1},!0),o(B,{...e(B),[a]:{type:"",text:""}},!0),o(H,{...e(H),[a]:!1},!0),o(M,{...e(M),[a]:{type:"",text:""}},!0),o(qe,{...e(qe),[a]:t.name},!0),o(Ge,{...e(Ge),[a]:t.player},!0),o(He,{...e(He),[a]:t.hp_max},!0),o(Ke,{...e(Ke),[a]:t.armor_class},!0),o(Xe,{...e(Xe),[a]:t.speed_walk},!0);const U=t.class_primary||{},E=t.background||{},re=t.species||{},W=t.proficiencies||{},J=t.equipment||{},j=Array.isArray(t.languages)?t.languages:[],ue=[],fe=[];j.forEach(D=>{zt.has(D)?fe.push(D):ue.push(D)});const X=E.tool_proficiency?[E.tool_proficiency]:[];o(Y,{...e(Y),[a]:U.name||""},!0),o(de,{...e(de),[a]:U.subclass||""},!0),o(K,{...e(K),[a]:U.level||1},!0),o(me,{...e(me),[a]:E.name||""},!0),o(ge,{...e(ge),[a]:E.feat||""},!0),o(I,{...e(I),[a]:re.name||""},!0),o(be,{...e(be),[a]:re.size||""},!0),o(h,{...e(h),[a]:t.alignment||""},!0),o(ee,{...e(ee),[a]:ue},!0),o(ae,{...e(ae),[a]:fe},!0),o(te,{...e(te),[a]:W.skills||E.skill_proficiencies||[]},!0),o(le,{...e(le),[a]:W.tools||X},!0),o(se,{...e(se),[a]:W.armor||[]},!0),o(ne,{...e(ne),[a]:W.weapons||[]},!0),o(ie,{...e(ie),[a]:J.items||[]},!0),o(ce,{...e(ce),[a]:J.trinket||""},!0),o(oe,{...e(oe),[a]:!1},!0)}Fl(()=>{aa().forEach(t=>Ut(t))});function Dt(t,a){o(Ae,{...e(Ae),[t]:a},!0),o(B,{...e(B),[t]:{type:"",text:""}},!0)}function Wt(t,a){o(Ve,{...e(Ve),[t]:a},!0)}function Jt(t,a){o($e,{...e($e),[t]:a},!0)}function Vt(t,a){o(je,{...e(je),[t]:a},!0)}function $t(t){o(N,t,!0)}function et(){o(N,null)}function jt(t,a){if(!a){e(B)[t]?.type==="error"&&o(B,{...e(B),[t]:{type:"",text:""}},!0);return}o(B,{...e(B),[t]:{type:"error",text:a}},!0)}function qt(t){const a=e(Ae)[t]||"preset";return a==="local"?e(je)[t]||"":a==="url"?(e($e)[t]||"").trim():e(Ve)[t]||""}async function Gt(t){if(!e(Q)[t]){o(Q,{...e(Q),[t]:!0},!0),o(B,{...e(B),[t]:{type:"",text:""}},!0);try{if(!(await fetch(`${he}/api/characters/${t}/photo`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({photo:qt(t)})})).ok){o(B,{...e(B),[t]:{type:"error",text:"No se pudo actualizar la foto."}},!0);return}o(B,{...e(B),[t]:{type:"success",text:"Foto actualizada."}},!0)}catch(a){console.error("Error updating photo",a),o(B,{...e(B),[t]:{type:"error",text:"Error de conexión al guardar."}},!0)}finally{o(Q,{...e(Q),[t]:!1},!0)}}}function w(t,a,y){return t={...t,[a]:y},t}function Me(t,a,y){return t={...t,[a]:Array.isArray(y)?y:[]},t}function Pe(t){return Array.from(t.currentTarget.selectedOptions).map(a=>a.value)}function we(t){return Array.isArray(t)?t.map(a=>String(a).trim()).filter(a=>a.length>0):[]}function Ht(t){o(oe,{...e(oe),[t]:!e(oe)[t]},!0)}function xa(t,a,y){return a?t?.get(a)||a:y}function Kt(t){const a=e(Y)[t];if(!a)return"Clase no definida";const y=xa(ka.class,a,a),T=Number(e(K)[t]??1)||1;return`${y} ${T}`}function Xt(t){const a=Number(e(K)[t]??1)||1,y=Math.min(20,a+1);o(K,w(e(K),t,y),!0),at(t)}async function at(t){if(e(H)[t])return;const a=String(e(qe)[t]??"").trim(),y=String(e(Ge)[t]??"").trim(),T=Number(e(He)[t]),U=Number(e(Ke)[t]),E=Number(e(Xe)[t]),re=String(e(Y)[t]??""),W=String(e(de)[t]??""),J=Number(e(K)[t]),j=String(e(me)[t]??""),ue=String(e(ge)[t]??""),fe=String(e(I)[t]??""),X=String(e(be)[t]??""),D=String(e(h)[t]??""),q=we(e(ee)[t]),Ce=we(e(ae)[t]),Ze=we(e(te)[t]),F=we(e(le)[t]),G=we(e(se)[t]),ve=we(e(ne)[t]),pe=we(e(ie)[t]),Le=String(e(ce)[t]??"");if(!a||!y||!Number.isFinite(T)||T<=0){o(M,{...e(M),[t]:{type:"error",text:"Revisa los datos obligatorios."}},!0);return}o(H,{...e(H),[t]:!0},!0),o(M,{...e(M),[t]:{type:"",text:""}},!0);try{if(!(await fetch(`${he}/api/characters/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,player:y,hp_max:T,armor_class:Number.isFinite(U)?U:0,speed_walk:Number.isFinite(E)?E:0,class_primary:{name:re,level:Number.isFinite(J)?J:1,subclass:W},background:{name:j,feat:ue,skill_proficiencies:Ze,tool_proficiency:F[0]||""},species:{name:fe,size:X,speed_walk:Number.isFinite(E)?E:0,traits:[]},languages:[...q,...Ce],alignment:D,proficiencies:{skills:Ze,saving_throws:[],armor:G,weapons:ve,tools:F},equipment:{items:pe,coins:{gp:0,sp:0,cp:0},trinket:Le}})})).ok){o(M,{...e(M),[t]:{type:"error",text:"No se pudo guardar."}},!0);return}o(M,{...e(M),[t]:{type:"success",text:"Datos actualizados."}},!0)}catch(Z){console.error("Error updating profile",Z),o(M,{...e(M),[t]:{type:"error",text:"Error de conexión."}},!0)}finally{o(H,{...e(H),[t]:!1},!0)}}var tt=Bs(),Sa=V(tt),Oa=r(i(Sa),2);let lt;A(Oa,5,aa,t=>t.id,(t,a)=>{var y=xs(),T=i(y),U=i(T),E=i(U),re=i(E);Mt(2),n(E);var W=r(E,2),J=i(W),j=i(J,!0);n(J);var ue=r(J,2),fe=i(ue,!0);n(ue),n(W),n(U);var X=r(U,2),D=i(X,!0);n(X),n(T);var q=r(T,2);{var Ce=G=>{var ve=ql(),pe=i(ve),Le=i(pe,!0);n(pe);var Z=r(pe,4),ta=i(Z,!0);n(Z);var Qe=r(Z,4),la=i(Qe,!0);n(Qe),n(ve),O((sa,na,ia)=>{x(Le,sa),x(ta,na),x(la,ia)},[()=>Kt(e(a).id),()=>xa(ka.species,e(I)[e(a).id],"Especie no definida"),()=>xa(ka.alignment,e(h)[e(a).id],"Alineamiento no definido")]),_(G,ve)};C(q,G=>{e(oe)[e(a).id]||G(Ce)})}var Ze=r(q,2);{var F=G=>{var ve=ks(),pe=i(ve),Le=r(i(pe),2);Ye(Le),n(pe);var Z=r(pe,2),ta=r(i(Z),2);Ye(ta),n(Z);var Qe=r(Z,2),la=i(Qe),sa=r(i(la),2);Ye(sa),n(la);var na=r(la,2),ia=r(i(na),2);Ye(ia),n(na);var st=r(na,2),Ba=r(i(st),2);Ye(Ba),n(st),n(Qe);var Ea=r(Qe,2),nt=r(i(Ea),2),Na=i(nt),ze=r(i(Na),2),Ta=i(ze);Ta.value=Ta.__value="";var Yt=r(Ta);A(Yt,17,()=>Qa,L,(l,s)=>{var v=Gl(),g=i(v,!0);n(v);var p={};O(()=>{x(g,e(s).label),p!==(p=e(s).key)&&(v.value=(v.__value=e(s).key)??"")}),_(l,v)}),n(ze);var it;z(ze),n(Na);var Aa=r(Na,2),ye=r(i(Aa),2),It=i(ye);{var ht=l=>{var s=Hl();s.value=s.__value="",_(l,s)},el=l=>{var s=Xl(),v=V(s);v.value=v.__value="";var g=r(v,2);A(g,17,()=>_a,L,(p,u)=>{var m=Kl(),k=i(m,!0);n(m);var S={};O(()=>{x(k,e(u).label),S!==(S=e(u).key)&&(m.value=(m.__value=e(u).key)??"")}),_(p,m)}),_(l,s)};C(It,l=>{_a.length===0?l(ht):l(el,!1)})}n(ye);var ot;z(ye),n(Aa);var Ma=r(Aa,2),Pa=r(i(Ma),2);Ye(Pa),n(Ma);var wa=r(Ma,2),Re=r(i(wa),2),Ca=i(Re);Ca.value=Ca.__value="";var al=r(Ca);A(al,17,()=>Ct,L,(l,s)=>{var v=Zl(),g=i(v,!0);n(v);var p={};O(()=>{x(g,e(s).label),p!==(p=e(s).key)&&(v.value=(v.__value=e(s).key)??"")}),_(l,v)}),n(Re);var rt;z(Re),n(wa);var La=r(wa,2),ke=r(i(La),2),tl=i(ke);{var ll=l=>{var s=Ql();s.value=s.__value="",_(l,s)},sl=l=>{var s=Il(),v=V(s);v.value=v.__value="";var g=r(v,2);A(g,17,()=>da,L,(p,u)=>{var m=Yl(),k=i(m,!0);n(m);var S={};O(()=>{x(k,e(u).label),S!==(S=e(u).key)&&(m.value=(m.__value=e(u).key)??"")}),_(p,m)}),_(l,s)};C(tl,l=>{da.length===0?l(ll):l(sl,!1)})}n(ke);var ut;z(ke),n(La);var za=r(La,2),Fe=r(i(za),2),Ra=i(Fe);Ra.value=Ra.__value="";var nl=r(Ra);A(nl,17,()=>Ya,L,(l,s)=>{var v=hl(),g=i(v,!0);n(v);var p={};O(()=>{x(g,e(s).label),p!==(p=e(s).key)&&(v.value=(v.__value=e(s).key)??"")}),_(l,v)}),n(Fe);var vt;z(Fe),n(za);var Fa=r(za,2),Ue=r(i(Fa),2),Ua=i(Ue);Ua.value=Ua.__value="";var il=r(Ua);A(il,17,()=>Lt,L,(l,s)=>{var v=es(),g=i(v,!0);n(v);var p={};O(()=>{x(g,e(s).label),p!==(p=e(s).key)&&(v.value=(v.__value=e(s).key)??"")}),_(l,v)}),n(Ue);var pt;z(Ue),n(Fa);var _t=r(Fa,2),De=r(i(_t),2),Da=i(De);Da.value=Da.__value="";var ol=r(Da);A(ol,17,()=>Ia,L,(l,s)=>{var v=as(),g=i(v,!0);n(v);var p={};O(()=>{x(g,e(s).label),p!==(p=e(s).key)&&(v.value=(v.__value=e(s).key)??"")}),_(l,v)}),n(De);var dt;z(De),n(_t),n(nt),n(Ea);var Wa=r(Ea,2),Ja=r(i(Wa),2),Va=i(Ja),xe=r(i(Va),2),rl=i(xe);{var ul=l=>{var s=ts();s.value=s.__value="",_(l,s)},vl=l=>{var s=We(),v=V(s);A(v,17,()=>ma,L,(g,p)=>{var u=ls(),m=i(u,!0);n(u);var k={};O(S=>{Je(u,S),x(m,e(p).label),k!==(k=e(p).key)&&(u.value=(u.__value=e(p).key)??"")},[()=>e(ee)[e(a).id]?.includes(e(p).key)]),_(g,u)}),_(l,s)};C(rl,l=>{ma.length===0?l(ul):l(vl,!1)})}n(xe);var mt;z(xe),n(Va);var gt=r(Va,2),Se=r(i(gt),2),pl=i(Se);{var _l=l=>{var s=ss();s.value=s.__value="",_(l,s)},dl=l=>{var s=We(),v=V(s);A(v,17,()=>ra,L,(g,p)=>{var u=ns(),m=i(u,!0);n(u);var k={};O(S=>{Je(u,S),x(m,e(p).label),k!==(k=e(p).key)&&(u.value=(u.__value=e(p).key)??"")},[()=>e(ae)[e(a).id]?.includes(e(p).key)]),_(g,u)}),_(l,s)};C(pl,l=>{ra.length===0?l(_l):l(dl,!1)})}n(Se);var bt;z(Se),n(gt),n(Ja);var $a=r(Ja,2),ja=i($a),Oe=r(i(ja),2),ml=i(Oe);{var gl=l=>{var s=is();s.value=s.__value="",_(l,s)},bl=l=>{var s=We(),v=V(s);A(v,17,()=>ga,L,(g,p)=>{var u=os(),m=i(u,!0);n(u);var k={};O(S=>{Je(u,S),x(m,e(p).label),k!==(k=e(p).key)&&(u.value=(u.__value=e(p).key)??"")},[()=>e(te)[e(a).id]?.includes(e(p).key)]),_(g,u)}),_(l,s)};C(ml,l=>{ga.length===0?l(gl):l(bl,!1)})}n(Oe);var ct;z(Oe),n(ja);var ft=r(ja,2),Be=r(i(ft),2),cl=i(Be);{var fl=l=>{var s=rs();s.value=s.__value="",_(l,s)},yl=l=>{var s=We(),v=V(s);A(v,17,()=>ba,L,(g,p)=>{var u=us(),m=i(u,!0);n(u);var k={};O(S=>{Je(u,S),x(m,e(p).label),k!==(k=e(p).key)&&(u.value=(u.__value=e(p).key)??"")},[()=>e(le)[e(a).id]?.includes(e(p).key)]),_(g,u)}),_(l,s)};C(cl,l=>{ba.length===0?l(fl):l(yl,!1)})}n(Be);var yt;z(Be),n(ft),n($a);var kt=r($a,2),qa=i(kt),Ee=r(i(qa),2),kl=i(Ee);{var xl=l=>{var s=vs();s.value=s.__value="",_(l,s)},Sl=l=>{var s=We(),v=V(s);A(v,17,()=>ca,L,(g,p)=>{var u=ps(),m=i(u,!0);n(u);var k={};O(S=>{Je(u,S),x(m,e(p).label),k!==(k=e(p).key)&&(u.value=(u.__value=e(p).key)??"")},[()=>e(se)[e(a).id]?.includes(e(p).key)]),_(g,u)}),_(l,s)};C(kl,l=>{ca.length===0?l(xl):l(Sl,!1)})}n(Ee);var xt;z(Ee),n(qa);var St=r(qa,2),Ne=r(i(St),2),Ol=i(Ne);{var Bl=l=>{var s=_s();s.value=s.__value="",_(l,s)},El=l=>{var s=We(),v=V(s);A(v,17,()=>fa,L,(g,p)=>{var u=ds(),m=i(u,!0);n(u);var k={};O(S=>{Je(u,S),x(m,e(p).label),k!==(k=e(p).key)&&(u.value=(u.__value=e(p).key)??"")},[()=>e(ne)[e(a).id]?.includes(e(p).key)]),_(g,u)}),_(l,s)};C(Ol,l=>{fa.length===0?l(Bl):l(El,!1)})}n(Ne);var Ot;z(Ne),n(St),n(kt),n(Wa);var Ga=r(Wa,2),Bt=r(i(Ga),2),Ha=i(Bt),_e=r(i(Ha),2),Nl=i(_e);{var Tl=l=>{var s=ms();s.value=s.__value="",_(l,s)},Al=l=>{var s=We(),v=V(s);A(v,17,()=>ua,L,(g,p)=>{var u=gs(),m=i(u,!0);n(u);var k={};O(S=>{Je(u,S),x(m,e(p).label),k!==(k=e(p).key)&&(u.value=(u.__value=e(p).key)??"")},[()=>e(ie)[e(a).id]?.includes(e(p).key)]),_(g,u)}),_(l,s)};C(Nl,l=>{ua.length===0?l(Tl):l(Al,!1)})}n(_e);var Et;z(_e),n(Ha);var Nt=r(Ha,2),Te=r(i(Nt),2),Ml=i(Te);{var Pl=l=>{var s=bs();s.value=s.__value="",_(l,s)},wl=l=>{var s=fs(),v=V(s);v.value=v.__value="";var g=r(v,2);A(g,17,()=>ya,L,(p,u)=>{var m=cs(),k=i(m,!0);n(m);var S={};O(()=>{x(k,e(u).label),S!==(S=e(u).key)&&(m.value=(m.__value=e(u).key)??"")}),_(p,m)}),_(l,s)};C(Ml,l=>{ya.length===0?l(Pl):l(wl,!1)})}n(Te);var Tt;z(Te),n(Nt),n(Bt),n(Ga);var At=r(Ga,2),Ka=i(At),oa=r(Ka,2),Cl=i(oa,!0);n(oa);var Ll=r(oa,2);{var zl=l=>{var s=ys(),v=i(s,!0);n(s),O(()=>{Xa(s,1,`manage-feedback ${e(M)[e(a).id].type}`),x(v,e(M)[e(a).id].text)}),_(l,s)};C(Ll,l=>{e(M)[e(a).id]?.text&&l(zl)})}Mt(2),n(At),n(ve),O((l,s,v,g,p,u,m)=>{Ie(Le,e(qe)[e(a).id]),Ie(ta,e(Ge)[e(a).id]),Ie(sa,e(He)[e(a).id]),Ie(ia,e(Ke)[e(a).id]),Ie(Ba,e(Xe)[e(a).id]),it!==(it=e(Y)[e(a).id])&&(ze.value=(ze.__value=e(Y)[e(a).id])??"",R(ze,e(Y)[e(a).id])),ye.disabled=_a.length===0,ot!==(ot=e(de)[e(a).id])&&(ye.value=(ye.__value=e(de)[e(a).id])??"",R(ye,e(de)[e(a).id])),Ie(Pa,e(K)[e(a).id]),rt!==(rt=e(me)[e(a).id])&&(Re.value=(Re.__value=e(me)[e(a).id])??"",R(Re,e(me)[e(a).id])),ke.disabled=da.length===0,ut!==(ut=e(ge)[e(a).id])&&(ke.value=(ke.__value=e(ge)[e(a).id])??"",R(ke,e(ge)[e(a).id])),vt!==(vt=e(I)[e(a).id])&&(Fe.value=(Fe.__value=e(I)[e(a).id])??"",R(Fe,e(I)[e(a).id])),pt!==(pt=e(be)[e(a).id])&&(Ue.value=(Ue.__value=e(be)[e(a).id])??"",R(Ue,e(be)[e(a).id])),dt!==(dt=e(h)[e(a).id])&&(De.value=(De.__value=e(h)[e(a).id])??"",R(De,e(h)[e(a).id])),$(xe,"size",l),mt!==(mt=e(ee)[e(a).id])&&(xe.value=(xe.__value=e(ee)[e(a).id])??"",R(xe,e(ee)[e(a).id])),$(Se,"size",s),bt!==(bt=e(ae)[e(a).id])&&(Se.value=(Se.__value=e(ae)[e(a).id])??"",R(Se,e(ae)[e(a).id])),$(Oe,"size",v),ct!==(ct=e(te)[e(a).id])&&(Oe.value=(Oe.__value=e(te)[e(a).id])??"",R(Oe,e(te)[e(a).id])),$(Be,"size",g),yt!==(yt=e(le)[e(a).id])&&(Be.value=(Be.__value=e(le)[e(a).id])??"",R(Be,e(le)[e(a).id])),$(Ee,"size",p),xt!==(xt=e(se)[e(a).id])&&(Ee.value=(Ee.__value=e(se)[e(a).id])??"",R(Ee,e(se)[e(a).id])),$(Ne,"size",u),Ot!==(Ot=e(ne)[e(a).id])&&(Ne.value=(Ne.__value=e(ne)[e(a).id])??"",R(Ne,e(ne)[e(a).id])),$(_e,"size",m),_e.disabled=ua.length===0,Et!==(Et=e(ie)[e(a).id])&&(_e.value=(_e.__value=e(ie)[e(a).id])??"",R(_e,e(ie)[e(a).id])),Te.disabled=ya.length===0,Tt!==(Tt=e(ce)[e(a).id])&&(Te.value=(Te.__value=e(ce)[e(a).id])??"",R(Te,e(ce)[e(a).id])),Ka.disabled=e(H)[e(a).id],oa.disabled=e(H)[e(a).id],x(Cl,e(H)[e(a).id]?"GUARDANDO...":"GUARDAR DATOS")},[()=>Math.max(3,Math.min(6,ma.length||3)),()=>Math.max(3,Math.min(6,ra.length||3)),()=>Math.max(4,Math.min(8,ga.length||4)),()=>Math.max(4,Math.min(8,ba.length||4)),()=>Math.max(3,Math.min(6,ca.length||3)),()=>Math.max(3,Math.min(6,fa.length||3)),()=>Math.max(3,Math.min(6,ua.length||3))]),f("input",Le,l=>o(qe,w(e(qe),e(a).id,l.currentTarget.value),!0)),f("input",ta,l=>o(Ge,w(e(Ge),e(a).id,l.currentTarget.value),!0)),f("input",sa,l=>o(He,w(e(He),e(a).id,l.currentTarget.value),!0)),f("input",ia,l=>o(Ke,w(e(Ke),e(a).id,l.currentTarget.value),!0)),f("input",Ba,l=>o(Xe,w(e(Xe),e(a).id,l.currentTarget.value),!0)),f("input",ze,l=>o(Y,w(e(Y),e(a).id,l.currentTarget.value),!0)),f("input",ye,l=>o(de,w(e(de),e(a).id,l.currentTarget.value),!0)),f("input",Pa,l=>o(K,w(e(K),e(a).id,l.currentTarget.value),!0)),f("input",Re,l=>o(me,w(e(me),e(a).id,l.currentTarget.value),!0)),f("input",ke,l=>o(ge,w(e(ge),e(a).id,l.currentTarget.value),!0)),f("input",Fe,l=>o(I,w(e(I),e(a).id,l.currentTarget.value),!0)),f("input",Ue,l=>o(be,w(e(be),e(a).id,l.currentTarget.value),!0)),f("input",De,l=>o(h,w(e(h),e(a).id,l.currentTarget.value),!0)),f("input",xe,l=>o(ee,Me(e(ee),e(a).id,Pe(l)),!0)),f("input",Se,l=>o(ae,Me(e(ae),e(a).id,Pe(l)),!0)),f("input",Oe,l=>o(te,Me(e(te),e(a).id,Pe(l)),!0)),f("input",Be,l=>o(le,Me(e(le),e(a).id,Pe(l)),!0)),f("input",Ee,l=>o(se,Me(e(se),e(a).id,Pe(l)),!0)),f("input",Ne,l=>o(ne,Me(e(ne),e(a).id,Pe(l)),!0)),f("input",_e,l=>o(ie,Me(e(ie),e(a).id,Pe(l)),!0)),f("input",Te,l=>o(ce,w(e(ce),e(a).id,l.currentTarget.value),!0)),f("click",Ka,()=>Xt(e(a).id)),f("click",oa,()=>at(e(a).id)),_(G,ve)};C(Ze,G=>{e(oe)[e(a).id]&&G(F)})}n(y),O(G=>{$(y,"data-char-id",e(a).id),$(E,"aria-label",`Editar foto de ${e(a).name}`),$(re,"src",G),$(re,"alt",e(a).name),x(j,e(a).name),x(fe,e(a).player),$(X,"aria-expanded",e(oe)[e(a).id]?"true":"false"),x(D,e(oe)[e(a).id]?"CERRAR EDICION":"EDITAR PERSONAJE")},[()=>Rt(e(a).photo)]),f("click",E,()=>$t(e(a).id)),f("click",X,()=>Ht(e(a).id)),_(t,y)}),n(Oa),n(Sa);var Zt=r(Sa,2);{var Qt=t=>{var a=Os(),y=V(a),T=r(y,2),U=i(T),E=i(U),re=r(i(E),2);n(E);var W=r(E,2);{let D=va(()=>e(Ae)[e(N)]||"preset"),q=va(()=>e(Ve)[e(N)]||""),Ce=va(()=>e($e)[e(N)]||""),Ze=va(()=>e(je)[e(N)]||"");$l(W,{title:"Foto",get options(){return Za},get source(){return e(D)},get presetValue(){return e(q)},get urlValue(){return e(Ce)},get localValue(){return e(Ze)},get serverUrl(){return he},onSourceChange:F=>Dt(e(N),F),onPresetChange:F=>Wt(e(N),F),onUrlChange:F=>Jt(e(N),F),onLocalChange:F=>Vt(e(N),F),onError:F=>jt(e(N),F)})}var J=r(W,2),j=i(J),ue=i(j,!0);n(j);var fe=r(j,2);{var X=D=>{var q=Ss(),Ce=i(q,!0);n(q),O(()=>{Xa(q,1,`manage-feedback ${e(B)[e(N)].type}`),x(Ce,e(B)[e(N)].text)}),_(D,q)};C(fe,D=>{e(B)[e(N)]?.text&&D(X)})}n(J),n(U),n(T),O(()=>{j.disabled=e(Q)[e(N)],x(ue,e(Q)[e(N)]?"GUARDANDO...":"ACTUALIZAR FOTO")}),f("click",y,et),f("click",re,et),f("click",j,()=>Gt(e(N))),_(t,a)};C(Zt,t=>{e(N)&&t(Qt)})}O(()=>lt=Xa(Oa,1,"characters-grid",null,lt,{"grid-three":aa().length>2})),_(pa,tt),Ul(),wt()}Dl(["click","input"]);var Ns=d('<section class="tab-panel"><!></section>');function Ws(pa){var ea=Ns(),aa=i(ea);Es(aa,{}),n(ea),_(pa,ea)}export{Ws as component};
