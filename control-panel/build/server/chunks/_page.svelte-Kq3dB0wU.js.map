{"version":3,"file":"_page.svelte-Kq3dB0wU.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/control/dice/_page.svelte.js"],"sourcesContent":["import \"clsx\";\nimport { ab as ensure_array_like, s as store_get, e as escape_html, a8 as attr, a as attr_class, u as unsubscribe_stores, a7 as derived } from \"../../../../chunks/index2.js\";\nimport { c as characters, l as lastRoll } from \"../../../../chunks/socket.js\";\nimport { g as get } from \"../../../../chunks/index.js\";\nfunction DiceRoller($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    var $$store_subs;\n    let selectedCharId = get(characters)[0]?.id;\n    let modifier = 0;\n    const isCrit = derived(() => store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll)?.result === 20 && store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll)?.sides === 20);\n    const isFail = derived(() => store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll)?.result === 1);\n    $$renderer2.push(`<div class=\"dice-panel\"><div class=\"char-selector\"><label class=\"selector-label\" for=\"char-select\">PERSONAJE ACTIVO</label> <div class=\"select-wrap\">`);\n    $$renderer2.select(\n      {\n        id: \"char-select\",\n        value: (\n          // ═══════════════════════════════════════════════════════════════\n          // Reactive Effects\n          // ═══════════════════════════════════════════════════════════════\n          /**\n           * Watches for new rolls from the server and triggers the animation effect.\n           * Uses tick() to ensure DOM elements are rendered before querying them.\n           */\n          /** @type {HTMLElement | null} */\n          /** @type {HTMLElement | null} */\n          selectedCharId\n        )\n      },\n      ($$renderer3) => {\n        $$renderer3.push(`<!--[-->`);\n        const each_array = ensure_array_like(store_get($$store_subs ??= {}, \"$characters\", characters));\n        for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n          let character = each_array[$$index];\n          $$renderer3.option({ value: character.id }, ($$renderer4) => {\n            $$renderer4.push(`${escape_html(character.name)}`);\n          });\n        }\n        $$renderer3.push(`<!--]-->`);\n      }\n    );\n    $$renderer2.push(` <span class=\"select-arrow\" aria-hidden=\"true\">▾</span></div></div> <div class=\"modifier-input\"><label class=\"modifier-label\" for=\"modifier\">MODIFICADOR</label> <div class=\"modifier-stepper-cluster\"><button class=\"modifier-stepper\" aria-label=\"Reducir modificador\">−</button> <input id=\"modifier\" class=\"modifier-value\" type=\"number\"${attr(\"value\", modifier)} min=\"-20\" max=\"20\"/> <button class=\"modifier-stepper\" aria-label=\"Aumentar modificador\">+</button></div></div> <div class=\"dice-grid\"><!--[-->`);\n    const each_array_1 = ensure_array_like([4, 6, 8, 10, 12]);\n    for (let $$index_1 = 0, $$length = each_array_1.length; $$index_1 < $$length; $$index_1++) {\n      let diceType = each_array_1[$$index_1];\n      $$renderer2.push(`<button class=\"dice-btn\"><span${attr_class(`dice-icon dice-icon--d${diceType}`)} aria-hidden=\"true\"></span> <span class=\"dice-label\">d${escape_html(diceType)}</span></button>`);\n    }\n    $$renderer2.push(`<!--]--> <button class=\"dice-btn d20-btn\"><span class=\"dice-icon dice-icon--d20\" aria-hidden=\"true\"></span> <span class=\"dice-label\">d20</span></button></div> `);\n    if (store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll)) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div${attr_class(\"roll-result\", void 0, { \"is-crit\": isCrit(), \"is-fail\": isFail() })}><div class=\"roll-die-label\">D${escape_html(store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll).sides)}</div> <div${attr_class(\"roll-number\", void 0, { \"crit\": isCrit(), \"fail\": isFail() })}>${escape_html(store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll).rollResult)}</div> <div${attr_class(\"roll-label\", void 0, { \"crit\": isCrit(), \"fail\": isFail() })}>`);\n      if (isCrit()) {\n        $$renderer2.push(\"<!--[-->\");\n        $$renderer2.push(`¡CRÍTICO!`);\n      } else if (isFail()) {\n        $$renderer2.push(\"<!--[1-->\");\n        $$renderer2.push(`¡PIFIA!`);\n      } else {\n        $$renderer2.push(\"<!--[!-->\");\n        $$renderer2.push(`${escape_html(store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll).characterName ?? store_get($$store_subs ??= {}, \"$lastRoll\", lastRoll).charId)}`);\n      }\n      $$renderer2.push(`<!--]--></div></div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n    }\n    $$renderer2.push(`<!--]--></div>`);\n    if ($$store_subs) unsubscribe_stores($$store_subs);\n  });\n}\nfunction _page($$renderer) {\n  $$renderer.push(`<section class=\"tab-panel\">`);\n  DiceRoller($$renderer);\n  $$renderer.push(`<!----></section>`);\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":";;;;;AAIA,SAAS,UAAU,CAAC,UAAU,EAAE,OAAO,EAAE;AACzC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,KAAK;AACxC,IAAI,IAAI,YAAY;AACpB,IAAI,IAAI,cAAc,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;AAC/C,IAAI,IAAI,QAAQ,GAAG,CAAC;AACpB,IAAI,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,EAAE,MAAM,KAAK,EAAE,IAAI,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,EAAE,KAAK,KAAK,EAAE,CAAC;AAC7K,IAAI,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,EAAE,MAAM,KAAK,CAAC,CAAC;AACrG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,qJAAqJ,CAAC,CAAC;AAC7K,IAAI,WAAW,CAAC,MAAM;AACtB,MAAM;AACN,QAAQ,EAAE,EAAE,aAAa;AACzB,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,OAAO;AACP,MAAM,CAAC,WAAW,KAAK;AACvB,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;AACpC,QAAQ,MAAM,UAAU,GAAG,iBAAiB,CAAC,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC;AACvG,QAAQ,KAAK,IAAI,OAAO,GAAG,CAAC,EAAE,QAAQ,GAAG,UAAU,CAAC,MAAM,EAAE,OAAO,GAAG,QAAQ,EAAE,OAAO,EAAE,EAAE;AAC3F,UAAU,IAAI,SAAS,GAAG,UAAU,CAAC,OAAO,CAAC;AAC7C,UAAU,WAAW,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,WAAW,KAAK;AACvE,YAAY,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9D,UAAU,CAAC,CAAC;AACZ,QAAQ;AACR,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;AACpC,MAAM;AACN,KAAK;AACL,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,6UAA6U,EAAE,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,+IAA+I,CAAC,CAAC;AAC9gB,IAAI,MAAM,YAAY,GAAG,iBAAiB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;AAC7D,IAAI,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,QAAQ,GAAG,YAAY,CAAC,MAAM,EAAE,SAAS,GAAG,QAAQ,EAAE,SAAS,EAAE,EAAE;AAC/F,MAAM,IAAI,QAAQ,GAAG,YAAY,CAAC,SAAS,CAAC;AAC5C,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,8BAA8B,EAAE,UAAU,CAAC,CAAC,sBAAsB,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,sDAAsD,EAAE,WAAW,CAAC,QAAQ,CAAC,CAAC,gBAAgB,CAAC,CAAC;AACxM,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,+JAA+J,CAAC,CAAC;AACvL,IAAI,IAAI,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,EAAE;AAC/D,MAAM,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;AAClC,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,UAAU,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,8BAA8B,EAAE,WAAW,CAAC,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,UAAU,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,WAAW,EAAE,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACxd,MAAM,IAAI,MAAM,EAAE,EAAE;AACpB,QAAQ,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;AACpC,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;AACrC,MAAM,CAAC,MAAM,IAAI,MAAM,EAAE,EAAE;AAC3B,QAAQ,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACrC,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC;AACnC,MAAM,CAAC,MAAM;AACb,QAAQ,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACrC,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,WAAW,CAAC,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC,aAAa,IAAI,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC/K,MAAM;AACN,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,oBAAoB,CAAC,CAAC;AAC9C,IAAI,CAAC,MAAM;AACX,MAAM,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACnC,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC;AACtC,IAAI,IAAI,YAAY,EAAE,kBAAkB,CAAC,YAAY,CAAC;AACtD,EAAE,CAAC,CAAC;AACJ;AACA,SAAS,KAAK,CAAC,UAAU,EAAE;AAC3B,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,2BAA2B,CAAC,CAAC;AAChD,EAAE,UAAU,CAAC,UAAU,CAAC;AACxB,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,iBAAiB,CAAC,CAAC;AACtC;;;;"}