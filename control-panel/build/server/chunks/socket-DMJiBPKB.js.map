{"version":3,"file":"socket-DMJiBPKB.js","sources":["../../../.svelte-kit/adapter-node/chunks/socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\nimport { w as writable } from \"./index.js\";\nconst SERVER_URL = \"http://192.168.1.83:3000\";\nconst socket = io(SERVER_URL);\nconst characters = writable([]);\nconst lastRoll = writable(null);\nsocket.on(\"connect\", () => {\n  console.log(\"Connected to server\");\n});\nsocket.on(\"initialData\", (data) => {\n  console.log(\"Received initial data:\", data);\n  characters.set(data.characters);\n});\nsocket.on(\"hp_updated\", ({ character }) => {\n  characters.update(\n    (chars) => chars.map((c) => c.id === character.id ? character : c)\n  );\n});\nsocket.on(\"character_created\", ({ character }) => {\n  characters.update((chars) => [...chars, character]);\n});\nsocket.on(\"character_updated\", ({ character }) => {\n  characters.update(\n    (chars) => chars.map((c) => c.id === character.id ? character : c)\n  );\n});\nsocket.on(\"condition_added\", ({ charId, condition }) => {\n  characters.update(\n    (chars) => chars.map(\n      (c) => c.id === charId ? { ...c, conditions: [...c.conditions || [], condition] } : c\n    )\n  );\n});\nsocket.on(\"condition_removed\", ({ charId, conditionId }) => {\n  characters.update(\n    (chars) => chars.map(\n      (c) => c.id === charId ? {\n        ...c,\n        conditions: (c.conditions || []).filter(\n          (cond) => cond.id !== conditionId\n        )\n      } : c\n    )\n  );\n});\nsocket.on(\"resource_updated\", ({ charId, resource }) => {\n  characters.update(\n    (chars) => chars.map(\n      (c) => c.id === charId ? {\n        ...c,\n        resources: (c.resources || []).map(\n          (r) => r.id === resource.id ? resource : r\n        )\n      } : c\n    )\n  );\n});\nsocket.on(\"rest_taken\", ({ charId, character }) => {\n  characters.update(\n    (chars) => chars.map((c) => c.id === charId ? character : c)\n  );\n});\nsocket.on(\"dice_rolled\", (data) => {\n  lastRoll.set(data);\n});\nexport {\n  SERVER_URL as S,\n  characters as c,\n  lastRoll as l,\n  socket as s\n};\n"],"names":[],"mappings":"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"}