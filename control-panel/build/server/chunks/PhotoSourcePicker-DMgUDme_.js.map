{"version":3,"file":"PhotoSourcePicker-DMgUDme_.js","sources":["../../../.svelte-kit/adapter-node/chunks/PhotoSourcePicker.js"],"sourcesContent":["import { a as attr_class, e as escape_html, ab as ensure_array_like, a8 as attr, a7 as derived } from \"./index2.js\";\nfunction PhotoSourcePicker($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    let {\n      title = \"\",\n      options = [],\n      source = \"preset\",\n      presetValue = \"\",\n      urlValue = \"\",\n      localValue = \"\",\n      dense = false,\n      serverUrl = \"\",\n      onSourceChange = () => {\n      },\n      onPresetChange = () => {\n      },\n      onUrlChange = () => {\n      },\n      onLocalChange = () => {\n      },\n      onError = () => {\n      }\n    } = $$props;\n    let isDropActive = false;\n    let previewLoadFailed = false;\n    let fallbackPreview = \"\";\n    function resolveOptionalPhotoSrc(photoPath) {\n      if (!photoPath) return \"\";\n      if (photoPath.startsWith(\"http://\") || photoPath.startsWith(\"https://\") || photoPath.startsWith(\"data:\") || photoPath.startsWith(\"blob:\")) {\n        return photoPath;\n      }\n      if (photoPath.startsWith(\"/\")) {\n        return `${serverUrl}${photoPath}`;\n      }\n      return `${serverUrl}/${photoPath.replace(/^\\/+/, \"\")}`;\n    }\n    const previewPhotoValue = derived(() => source === \"local\" ? localValue : source === \"url\" ? urlValue.trim() : presetValue);\n    const previewPhotoSrc = derived(() => resolveOptionalPhotoSrc(previewPhotoValue()));\n    $$renderer2.push(`<section${attr_class(\"photo-picker\", void 0, { \"dense\": dense })} aria-label=\"Fuente de foto\"><span class=\"label-caps\">${escape_html(title)}</span> <div class=\"photo-content\"><div class=\"photo-controls\"><div class=\"photo-segment-controls\" role=\"tablist\" aria-label=\"Tipo de foto\"><button type=\"button\"${attr_class(\"photo-segment-btn\", void 0, { \"dense\": dense, \"active\": source === \"preset\" })}>Preset</button> <button type=\"button\"${attr_class(\"photo-segment-btn\", void 0, { \"dense\": dense, \"active\": source === \"url\" })}>URL</button> <button type=\"button\"${attr_class(\"photo-segment-btn\", void 0, { \"dense\": dense, \"active\": source === \"local\" })}>Archivo Local</button></div> `);\n    if (source === \"preset\") {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.select(\n        {\n          class: \"photo-select\",\n          value: presetValue,\n          onchange: (event) => onPresetChange(event.currentTarget.value)\n        },\n        ($$renderer3) => {\n          $$renderer3.push(`<!--[-->`);\n          const each_array = ensure_array_like(options);\n          for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n            let option = each_array[$$index];\n            $$renderer3.option({ value: option.value }, ($$renderer4) => {\n              $$renderer4.push(`${escape_html(option.label)}`);\n            });\n          }\n          $$renderer3.push(`<!--]-->`);\n        },\n        void 0,\n        { dense }\n      );\n    } else if (source === \"url\") {\n      $$renderer2.push(\"<!--[1-->\");\n      $$renderer2.push(`<div${attr_class(\"photo-input-row\", void 0, { \"dense\": dense })}><input type=\"url\" placeholder=\"https://...\"${attr(\"value\", urlValue)}${attr_class(\"\", void 0, { \"dense\": dense })}/> <button type=\"button\"${attr_class(\"photo-clear-btn\", void 0, { \"dense\": dense })} aria-label=\"Limpiar URL\">✕</button></div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<input type=\"file\" class=\"photo-file-input-hidden\" accept=\"image/*\"/> <div${attr_class(\"photo-dropzone\", void 0, { \"dense\": dense, \"active\": isDropActive })} role=\"button\" tabindex=\"0\"><span class=\"photo-dropzone-title\">Arrastra imagen aquí</span> <span class=\"photo-dropzone-subtitle\">o toca para elegir archivo</span></div> <div${attr_class(\"photo-input-row\", void 0, { \"dense\": dense })}><input type=\"text\"${attr_class(\"photo-file-input\", void 0, { \"dense\": dense })} readonly=\"\"${attr(\"value\", localValue ? \"Imagen local cargada ✅\" : \"Sin archivo\")}/> <button type=\"button\"${attr_class(\"photo-clear-btn\", void 0, { \"dense\": dense })} aria-label=\"Limpiar archivo\">✕</button></div>`);\n    }\n    $$renderer2.push(`<!--]--></div> `);\n    if ((previewPhotoSrc() || fallbackPreview) && !previewLoadFailed) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div class=\"photo-preview-wrap\" aria-live=\"polite\"><span class=\"label-caps\">Preview</span> <img${attr(\"src\", previewPhotoSrc() || resolveOptionalPhotoSrc(fallbackPreview))} alt=\"Preview foto\"${attr_class(\"photo-preview\", void 0, { \"dense\": dense })} onerror=\"this.__e=event\"/></div>`);\n    } else if (previewPhotoSrc() && previewLoadFailed) ;\n    else {\n      $$renderer2.push(\"<!--[!-->\");\n    }\n    $$renderer2.push(`<!--]--></div></section>`);\n  });\n}\nexport {\n  PhotoSourcePicker as P\n};\n"],"names":[],"mappings":"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"}