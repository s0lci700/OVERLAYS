/* ═══════════════════════════════════════════════════
   CHARACTER CARD
   Uses .card-base and .btn-base from app.css
   ═══════════════════════════════════════════════════ */

.char-card {
  position: relative;
  overflow: hidden;
  transition: border-color var(--t-fast);
}

/* ── Hit Flash ── */
.hit-flash {
  position: absolute;
  inset: 0;
  background: rgba(255, 77, 106, 0.2);
  pointer-events: none;
  opacity: 0;
  border-radius: inherit;
}

.char-card.is-critical {
  border-color: var(--red);
}

.char-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-3);
}

.char-identity {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  overflow: hidden;
}

.char-name {
  font-family: var(--font-display);
  font-size: 1.75rem;
  color: var(--white);
  text-transform: uppercase;
  letter-spacing: 0.02em;
  line-height: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.char-player {
  font-size: 0.7rem;
  color: var(--grey);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.char-hp-nums {
  display: flex;
  align-items: baseline;
  gap: 2px;
  flex-shrink: 0;
}

.hp-cur {
  font-family: var(--font-mono);
  font-size: 2.25rem;
  font-weight: 700;
  color: var(--white);
  line-height: 1;
  transition: color var(--t-fast);
}

.hp-cur.critical {
  color: var(--red);
}

.hp-sep {
  font-family: var(--font-mono);
  font-size: 1.25rem;
  color: var(--grey);
  line-height: 1;
}

.hp-max {
  font-family: var(--font-mono);
  font-size: 0.9rem;
  color: var(--grey);
  line-height: 1;
}

.hp-track {
  height: 6px;
  background: #222;
  border-radius: var(--radius-pill);
  overflow: hidden;
}

.hp-fill {
  height: 100%;
  border-radius: var(--radius-pill);
  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1), background var(--t-normal);
}

.hp-fill.hp--healthy {
  background: linear-gradient(90deg, #15803D, #22C55E);
  box-shadow: 0 0 6px rgba(34, 197, 94, 0.4);
}

.hp-fill.hp--injured {
  background: linear-gradient(90deg, #B45309, #F59E0B);
  box-shadow: 0 0 6px rgba(245, 158, 11, 0.4);
}

.hp-fill.hp--critical {
  background: linear-gradient(90deg, #991B1B, #FF4D6A);
  box-shadow: 0 0 6px rgba(255, 77, 106, 0.4);
  animation: barPulse 1.5s ease-in-out infinite;
}

@keyframes barPulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.6; }
}

.char-controls {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: var(--space-2);
  align-items: center;
}

.btn-damage {
  background: var(--red-dim);
  border-color: var(--red);
  color: var(--red);
}

.btn-damage:hover {
  background: var(--red);
  color: var(--white);
  box-shadow: var(--shadow-red);
}

.btn-heal {
  background: var(--cyan-dim);
  border-color: var(--cyan);
  color: var(--cyan);
}

.btn-heal:hover {
  background: var(--cyan);
  color: var(--black);
  box-shadow: var(--shadow-cyan);
}

.stepper-cluster {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  background: var(--black-elevated);
  border: 1px solid var(--grey-dim);
  border-radius: var(--radius-md);
  padding: var(--space-1);
}

.stepper {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  color: var(--grey);
  font-size: 1.25rem;
  line-height: 1;
  transition: background var(--t-fast), color var(--t-fast);
}

.stepper:hover {
  background: var(--grey-dim);
  color: var(--white);
}

.amount-input {
  width: 48px;
  text-align: center;
  font-family: var(--font-mono);
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--white);
}

/* ── Stats Row ── */
.char-stats {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.stat-item {
  display: flex;
  align-items: baseline;
  gap: var(--space-1);
}

.stat-label {
  font-family: var(--font-display);
  font-size: 0.75rem;
  color: var(--grey);
  letter-spacing: 0.1em;
}

.stat-value {
  font-family: var(--font-mono);
  font-size: 1rem;
  font-weight: 700;
  color: var(--white);
}

.stat-divider {
  color: var(--grey-dim);
  font-size: 0.75rem;
}

/* ── Conditions ── */
.conditions-row {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.condition-pill {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-3);
  background: rgba(255, 77, 106, 0.12);
  border: 1px solid var(--red);
  border-radius: var(--radius-pill);
  color: var(--red);
  font-family: var(--font-display);
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
  transition: background var(--t-fast), color var(--t-fast);
}

.condition-pill:hover {
  background: var(--red);
  color: var(--white);
}

/* ── Resources ── */
.resources-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.resource-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
}

.resource-label {
  font-family: var(--font-display);
  font-size: 0.8rem;
  color: var(--grey);
  letter-spacing: 0.1em;
  flex-shrink: 0;
}

.resource-pips {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
  justify-content: flex-end;
}

.pip {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid;
  cursor: pointer;
  transition: background var(--t-fast), box-shadow var(--t-fast), transform var(--t-fast);
}

.pip:active {
  transform: scale(0.85);
}

.pip--long_rest        { border-color: var(--red); }
.pip--long_rest.pip--filled  { background: var(--red);  box-shadow: 0 0 6px rgba(255, 77, 106, 0.5); }

.pip--short_rest       { border-color: var(--cyan); }
.pip--short_rest.pip--filled { background: var(--cyan); box-shadow: 0 0 6px rgba(0, 212, 232, 0.5); }

.pip--turn, .pip--dm   { border-color: var(--grey); }
.pip--turn.pip--filled,
.pip--dm.pip--filled   { background: var(--grey); }

/* ── Rest Buttons ── */
.rest-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-2);
}

.btn-rest {
  font-size: 0.75rem;
  padding: var(--space-2) var(--space-3);
  color: var(--grey);
  border-color: var(--grey-dim);
  min-height: 40px;
}

.btn-rest:hover {
  color: var(--white);
  border-color: var(--grey);
  background: var(--black-elevated);
}
